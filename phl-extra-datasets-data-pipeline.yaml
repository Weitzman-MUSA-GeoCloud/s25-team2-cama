main:
  steps:
    - parallelStep:
        parallel:
          branches:
            neighborhoods:
              steps:
                - extract_phl_neighborhoods:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/extract_phl_neighborhoods'
                      auth:
                        type: OIDC
                - prepare_phl_neighborhoods:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/prepare_phl_neighborhoods'
                      auth:
                        type: OIDC
                - run_sql_source_phl_neighborhoods:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_neighborhoods'
                      query:
                        sql: 'run_sql_neighborhoods/sql/source_phl_neighborhoods.sql'
                      auth:
                        type: OIDC
                - run_sql_core_phl_neighborhoods:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_neighborhoods'
                      query:
                        sql: 'run_sql_neighborhoods/sql/core_phl_neighborhoods.sql'
                      auth:
                        type: OIDC

            parks:
              steps:
                - extract_phl_parks:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/extract_phl_parks'
                      auth:
                        type: OIDC
                - prepare_phl_parks:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/prepare_phl_parks'
                      auth:
                        type: OIDC
                - run_sql_source_phl_parks:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_parks'
                      query:
                        sql: 'run_sql_parks/sql/source_phl_parks.sql'
                      auth:
                        type: OIDC
                - run_sql_core_phl_parks:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_parks'
                      query:
                        sql: 'run_sql_parks/sql/core_phl_parks.sql'
                      auth:
                        type: OIDC

            schools:
              steps:
                - extract_phl_schools:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/extract_phl_schools'
                      auth:
                        type: OIDC
                - prepare_phl_schools:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/prepare_phl_schools'
                      auth:
                        type: OIDC
                - run_sql_source_phl_schools:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_schools'
                      query:
                        sql: 'run_sql_schools/sql/source_phl_schools.sql'
                      auth:
                        type: OIDC
                - run_sql_core_phl_schools:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_schools'
                      query:
                        sql: 'run_sql_schools/sql/core_phl_schools.sql'
                      auth:
                        type: OIDC

            septa:
              steps:
                - extract_phl_septa:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/extract_phl_septa'
                      auth:
                        type: OIDC
                - prepare_phl_septa:
                    call: http.post
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/prepare_phl_septa'
                      auth:
                        type: OIDC
                - run_sql_source_phl_septa:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_septa'
                      query:
                        sql: 'run_sql_septa/sql/source_phl_septa.sql'
                      auth:
                        type: OIDC
                - run_sql_core_phl_septa:
                    call: http.get
                    args:
                      url: 'https://us-east4-musa5090s25-team2.cloudfunctions.net/run_sql_septa'
                      query:
                        sql: 'run_sql_septa/sql/core_phl_septa.sql'
                      auth:
                        type: OIDC
